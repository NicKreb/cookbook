<html lang="en">
<%- include("../partials/head.ejs") %>

<body>
  <%- include("../partials/nav.ejs") %>
<div class="advertisement"><p class="adleft">Advertisement</p><img src="https://github.com/NicKreb/cookbook/blob/main/assets/advertisement%201.png?raw=true" height="100" width="600" alt="Place your ad here!"><p class="adright">Advertisement</p></div>
  <br >
  <br >

<div class="display-container">
  <div class="details content">
    <h2><%= recipe.title %></h2>
    <div class="content">
      <img class="recipe-image" src="<%= recipe.recipeImage %>" width="600" height="400" alt="<%= recipe.title %>">
        <h4 class="prep-time"><em class="recipe-font">Prep Time:</em> <%= recipe.preptime %> minutes</h2>
            <h4 class="cook-time"><em class="recipe-font">Cook Time:</em> <%= recipe.cooktime %> minutes</h4>
            <small><em class="recipe-font">Flavor profile:</em> <%= recipe.flavor %></small><br>
            <p><em class="recipe-font">Ingredients:</em><br> <%= recipe.ingredients %></p><br>
            <p><em class="recipe-font">Instructions:</em><br><%= recipe.instructions %></p><br>
    </div>
  </div>
  <br>
  <br>
  <br>
  <br>
  <a class="delete" data-doc="<%= recipe._id %>">🗑️ DELETE</a>
  <br>
  <br>
</div>
  <%- include("../partials/footer.ejs") %>

  <script>
   const trashcan = document.querySelector('.delete');
   
   trashcan.addEventListener('click', (e) => {
    const endpoint = `/recipes/${trashcan.dataset.doc}`;

    fetch(endpoint, {
      method: 'DELETE'
    })
    .then((response) => res.json())
    .then((data) = window.location.href = data.redirect)
    .catch(err => {
      console.log(err);
    })
   })
  </script>
</body>
</html>
